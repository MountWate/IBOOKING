{"version":3,"sources":["webpack:///./src/views/NewReserve.vue?a97c","webpack:///./src/views/NewReserve.vue?a74b","webpack:///src/views/NewReserve.vue","webpack:///./src/views/NewReserve.vue?7c89","webpack:///./src/views/NewReserve.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","searchSwitch","model","value","callback","$$v","name","expression","_l","item","key","label","on","search","_v","reset","rush","tableData","scopedSlots","_u","fn","scope","row","$set","$event","handleEdit","staticClass","pageNum","pageSize","total","handleSizeChange","handleCurrentChange","dialogFormVisible","slot","_s","classroom","index","class","currentIndex","selectClass","available","classData","id","pickerOptions","loadSeat","selectDate","start","optionStart","step","end","selectStart","optionEnd","selectEnd","sitId","save","staticRenderFns","data","searchOptions","idList","roomId","disabledDate","created","methods","load","params","then","res","seatRoom","setTimeout","console","getTime","day","username","startTime","endTime","component"],"mappings":"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AAG,SAASjB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWY,GAAG,CAAC,MAAQnB,EAAI6D,OAAO,CAAC7D,EAAIqB,GAAG,UAAU,IAAI,IAAI,IACnpCyC,EAAkB,GC8HP,GACfjD,kBACAkD,OACA,OACAlD,QACAL,kBACAwD,eACA,CACAtD,WACAQ,YAEA,CACAR,WACAQ,aAGAgB,UACAC,YACAC,SACAZ,aACAe,qBACAG,aACAM,aACAiB,UACApB,gBACAe,YACAR,cACAK,eACAE,aACAO,UACAZ,eACAI,aACAR,eACAiB,gBACA,iBACA,qDACA,cAGA,qBAMAC,UACA,YACA,uBAEA,4BACA,gCACA,uBACA,kBAGAC,SACAjD,SACA,yBACA,YAEA,iBAIAG,OAEA,2CAEA,+CACA,uBACA,iCAEA,uEACA,uBACA,oBAIA+C,OACA,qCACAC,QACArC,qBACAC,uBACAtB,kBAEA2D,KAAAC,IACA,8BACA,2BAIAC,WACA,kBACA,qCACAH,QACAtB,gBAEAuB,KAAAC,IACA,gBACA,wBACAE,gBACA,wCACAC,kCACAA,uBACA,2CACAA,mCACA,iCACA,qBACA,sBAEA,iBACA,qBACA,gDAIA,MAEA,6BAIA,gCAIAtD,QACA,aACA,aAEAU,cACA,aAGA,sBACA,0BACA,eACA,iBACA,iBANA,uCAUA6C,UACA,iBACA,qEACA,sCACA,oCACA,kCACA,+BAEA1B,WACA,2EACA,uDACA,yBACA,wBAEA,iDACA,yCACA,KACA,qCACAoB,QACAtB,eACA6B,oBACAzB,uBACAG,sBAEAgB,KAAAC,IACA,uBACA,0EACA,iBACA,0BAUApC,oBACA,gBACA,aAEAC,uBACA,eACA,aAEAuB,OACA,2EACA,iDACA,yCACA,mBACA,IACA,8BACA,MACA,iCAEA,6CACAkB,2DACAb,mBACAN,iBACAoB,+CACAC,6CACAT,KAAAC,IACA,eACA,8BAEA,kCAEA,kBAIA,oCAGA,oCAIA3B,gBACA,iCACA,oBACA,iCAEA,iCCzWoV,I,wBCQhVoC,EAAY,eACd,EACAnF,EACA+D,GACA,EACA,KACA,KACA,MAIa,aAAAoB,E","file":"js/chunk-2600a270.3ffbcf67.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewReserve.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"padding\":\"10px 0\"}},[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"suffix-icon\":\"el-icon-search\",\"placeholder\":'搜索' + _vm.searchSwitch},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('el-select',{staticStyle:{\"width\":\"80px\",\"margin-left\":\"5px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.searchSwitch),callback:function ($$v) {_vm.searchSwitch=$$v},expression:\"searchSwitch\"}},_vm._l((_vm.searchOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")]),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")]),_c('el-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.rush}},[_vm._v(\"抢座\")])],1),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"教室ID\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"教室名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"教室类型\"}}),_c('el-table-column',{attrs:{\"label\":\"是否可用\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ccc\",\"disabled\":\"\"},model:{value:(scope.row.available),callback:function ($$v) {_vm.$set(scope.row, \"available\", $$v)},expression:\"scope.row.available\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"openTime\",\"label\":\"开放时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"closeTime\",\"label\":\"关闭时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"option\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"预约 \"),_c('i',{staticClass:\"el-icon-s-check\"})])]}}])})],1),_c('div',{staticStyle:{\"padding\":\"10px 0\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageNum,\"page-sizes\":[2, 5, 10, 20],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"座位预定\",\"visible\":_vm.dialogFormVisible,\"width\":\"70%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-row',{staticStyle:{\"margin-bottom\":\"20px\",\"height\":\"auto\"},attrs:{\"gutter\":20}},[_c('el-col',{staticStyle:{\"height\":\"100%\"},attrs:{\"span\":18}},[_c('el-card',{staticClass:\"box-card-home\",staticStyle:{\"height\":\"100%\"}},[_c('div',{staticClass:\"clearfix\",staticStyle:{\"color\":\"#409EFF\",\"height\":\"10%\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"教室名称：\"+_vm._s(_vm.classroom))])]),_c('div',{staticStyle:{\"height\":\"90%\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\",\"cursor\":\"pointer\",\"flex\":\"80%\"}},_vm._l((_vm.classData),function(item,index){return _c('div',{key:index,class:[index === _vm.currentIndex ? 'select-class' : 'class-item'],staticStyle:{\"margin-bottom\":\"20px\"},on:{\"click\":function($event){return _vm.selectClass(index)}}},[(!item.available)?_c('div',{staticClass:\"seat-locked\"},[_vm._v(\" \"+_vm._s(_vm.classData[index].id)+\" \")]):(item.chargeport)?_c('div',{class:[index === _vm.currentIndex ? 'select-class' : 'class-item2']},[_vm._v(\" \"+_vm._s(_vm.classData[index].id)+\" \")]):_c('div',[_vm._v(\" \"+_vm._s(_vm.classData[index].id)+\" \")])])}),0)])])],1),_c('el-col',{staticStyle:{\"height\":\"100%\"},attrs:{\"span\":6}},[_c('el-form',{attrs:{\"label-width\":\"30%\"}},[_c('el-form-item',{attrs:{\"label\":\"日期选择\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"80%\"},attrs:{\"type\":\"date\",\"picker-options\":_vm.pickerOptions,\"value-format\":\"yyyy-MM-dd\"},on:{\"change\":function($event){return _vm.loadSeat()}},model:{value:(_vm.selectDate),callback:function ($$v) {_vm.selectDate=$$v},expression:\"selectDate\"}})],1),_c('el-form-item',{attrs:{\"label\":\"开始时间\"}},[_c('el-time-select',{staticStyle:{\"width\":\"80%\"},attrs:{\"picker-options\":{\n                            start: _vm.optionStart,\n                            step: '01:00',\n                            end: '21:00'\n                        }},on:{\"change\":function($event){return _vm.loadSeat()}},model:{value:(_vm.selectStart),callback:function ($$v) {_vm.selectStart=$$v},expression:\"selectStart\"}})],1),_c('el-form-item',{attrs:{\"label\":\"结束时间\"}},[_c('el-time-select',{staticStyle:{\"width\":\"80%\"},attrs:{\"picker-options\":{\n                            start: _vm.optionEnd,\n                            step: '01:00',\n                            end: '22:00'\n                        }},on:{\"change\":function($event){return _vm.loadSeat()}},model:{value:(_vm.selectEnd),callback:function ($$v) {_vm.selectEnd=$$v},expression:\"selectEnd\"}})],1),_c('el-form-item',{attrs:{\"label\":\"座位选择\"}},[_c('div',{staticStyle:{\"color\":\"rgb(0, 0, 0)\"}},[_vm._v(\" \"+_vm._s(_vm.sitId)+\" 号 \")])])],1),_c('div',{staticStyle:{\"padding\":\"15px\"}},[_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',{staticClass:\"status-dot\"}),_vm._v(\"空闲-有插座 \")]),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',{staticClass:\"status-dot\",staticStyle:{\"background-color\":\"#8a8a8a\"}}),_vm._v(\"空闲-无插座 \")]),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',{staticClass:\"status-dot\",staticStyle:{\"background-color\":\"#d81e06\"}}),_vm._v(\"已被占 \")]),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',{staticClass:\"status-dot\",staticStyle:{\"background-color\":\"#43d828\"}}),_vm._v(\"选中 \")])])],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div style=\"padding: 10px 0;\">\n            <el-input style=\"width: 200px\" suffix-icon=\"el-icon-search\" :placeholder=\"'搜索' + searchSwitch\"\n                v-model=\"name\"></el-input>\n            <el-select style=\"width: 80px; margin-left: 5px;\" v-model=\"searchSwitch\" placeholder=\"请选择\">\n                <el-option v-for=\"item in searchOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n            </el-select>\n            <el-button style=\"margin-left: 5px;\" type=\"primary\" @click=\"search\">搜索</el-button>\n            <el-button @click=\"reset\">重置</el-button>\n            <el-button style=\"margin-left: 5px;\" type=\"primary\" @click=\"rush\">抢座</el-button>\n        </div>\n        <el-table :data=\"tableData\" border stripe>\n\n            <el-table-column prop=\"id\" label=\"教室ID\">\n            </el-table-column>\n            <el-table-column prop=\"name\" label=\"教室名称\">\n            </el-table-column>\n            <el-table-column prop=\"type\" label=\"教室类型\">\n            </el-table-column>\n            <el-table-column label=\"是否可用\">\n                <template slot-scope=\"scope\">\n                    <el-switch v-model=\"scope.row.available\" active-color=\"#13ce66\" inactive-color=\"#ccc\"\n                        disabled></el-switch>\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"openTime\" label=\"开放时间\">\n            </el-table-column>\n            <el-table-column prop=\"closeTime\" label=\"关闭时间\">\n            </el-table-column>\n            <el-table-column prop=\"option\" label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-button @click=\"handleEdit(scope.row)\">预约 <i class=\"el-icon-s-check\"></i></el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <div style=\"padding: 10px 0;\">\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pageNum\"\n                :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"total\">\n            </el-pagination>\n        </div>\n\n        <el-dialog title=\"座位预定\" :visible.sync=\"dialogFormVisible\" width=\"70%\">\n            <el-row :gutter=\"20\" style=\"margin-bottom: 20px; height: auto;\">\n                <el-col :span=\"18\" style=\"height: 100%;\">\n                    <el-card class=\"box-card-home\" style=\"height: 100%;\">\n                        <div slot=\"header\" class=\"clearfix\" style=\"color: #409EFF; height: 10%;\">\n                            <span>教室名称：{{ classroom }}</span>\n                        </div>\n                        <div style=\"height: 90%;\">\n\n                            <!-- 选座位 -->\n                            <div style=\"display: flex; flex-wrap: wrap; cursor: pointer; flex: 80%\">\n                                <div :class=\"[index === currentIndex ? 'select-class' : 'class-item']\"\n                                    @click=\"selectClass(index)\" style=\"  margin-bottom: 20px;\"\n                                    v-for=\"(item, index) in classData\" :key=\"index\">\n                                    <div v-if=\"!item.available\" class=\"seat-locked\">\n                                        {{ classData[index].id }}\n                                    </div>\n                                    <div v-else-if=\"item.chargeport\"\n                                        :class=\"[index === currentIndex ? 'select-class' : 'class-item2']\">\n                                        {{ classData[index].id }}\n                                    </div>\n                                    <div v-else>\n                                        {{ classData[index].id }}\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n\n                    </el-card>\n                </el-col>\n\n                <el-col :span=\"6\" style=\"height: 100%;\">\n                    <el-form label-width=\"30%\">\n                        <el-form-item label=\"日期选择\">\n                            <el-date-picker v-model=\"selectDate\" type=\"date\" style=\"width: 80%;\"\n                                :picker-options=\"pickerOptions\" value-format=\"yyyy-MM-dd\" @change=\"loadSeat()\">\n                            </el-date-picker>\n                        </el-form-item>\n\n                        <el-form-item label=\"开始时间\">\n                            <el-time-select v-model=\"selectStart\" :picker-options=\"{\n                                start: optionStart,\n                                step: '01:00',\n                                end: '21:00'\n                            }\" style=\"width: 80%;\" @change=\"loadSeat()\">\n                            </el-time-select>\n                        </el-form-item>\n\n                        <el-form-item label=\"结束时间\">\n                            <el-time-select v-model=\"selectEnd\" :picker-options=\"{\n                                start: optionEnd,\n                                step: '01:00',\n                                end: '22:00'\n                            }\" style=\"width: 80%;\" @change=\"loadSeat()\">\n                            </el-time-select>\n                        </el-form-item>\n\n                        <el-form-item label=\"座位选择\">\n                            <div style=\"color: rgb(0, 0, 0)\">\n                                {{ sitId }} 号\n                            </div>\n                        </el-form-item>\n                    </el-form>\n                    <div style=\"padding: 15px; \">\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\"></span>空闲-有插座\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #8a8a8a;\"></span>空闲-无插座\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #d81e06;\"></span>已被占\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #43d828;\"></span>选中\n                        </div>\n                    </div>\n                </el-col>\n\n            </el-row>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"NewReserve\",\n    data() {\n        return {\n            name: \"\",\n            searchSwitch: '教室',\n            searchOptions: [\n                {\n                    value: '教室',\n                    label: '教室'\n                },\n                {\n                    value: '座位',\n                    label: '座位'\n                }\n            ],\n            pageNum: 1,\n            pageSize: 20,\n            total: 10,\n            tableData: [],\n            dialogFormVisible: false,\n            classroom: '',\n            classData: {},\n            idList: [],//未被占用的座位号\n            currentIndex: -1,\n            sitId: '---',\n            selectDate: '',\n            selectStart: '',\n            selectEnd: '',\n            roomId: -1,\n            optionStart: '',\n            optionEnd: '',\n            pickerOptions: {\n                disabledDate(time) {\n                    const today = new Date(); // 获取今天的日期\n                    const targetDate = new Date(time.getFullYear(), time.getMonth(), time.getDate()); // 获取目标日期\n                    const difference = (targetDate - today) / (24 * 60 * 60 * 1000); // 计算目标日期与今天的天数差\n\n                    // 只允许选择今天和今天之后三天的日期\n                    return difference < -1 || difference > 3;\n                }\n            },\n\n        }\n    },\n    created() {\n        this.load()\n        this.classData = []\n        // console.log(this.$route.params.id);\n        if (this.$route.params.id !== undefined) {\n            this.name = this.$route.params.id\n            this.searchSwitch = '座位'\n            this.seatRoom()\n        }\n    },\n    methods: {\n        search() {\n            if (this.searchSwitch === '教室') {\n                this.load()\n            } else {\n                this.seatRoom()\n            }\n        },\n        //抢座功能，随机分配一个未被占用的座位号，调用seatRoom\n        rush() {\n          //从数据库中获取所有未被占用的座位号，随机分配一个\n            this.request.get(\"/sit/all_sits\").then(res => {\n                //获取所有未被占用的座位号\n                this.idList = res.data.filter(item => item.available === true)\n                if (this.idList.length === 0) {\n                    this.$message.error(\"当前没有可用座位\")\n                } else {\n                    this.name = this.idList[Math.floor(Math.random() * this.idList.length)].id\n                    this.searchSwitch = '座位'\n                    this.seatRoom()\n                }\n            })\n        },\n        load() {\n            this.request.get(\"/room/check_room\", {\n                params: {\n                    pageNum: this.pageNum,\n                    pageSize: this.pageSize,\n                    name: this.name\n                }\n            }).then(res => {\n                this.tableData = res.data.records\n                this.total = res.data.total\n            })\n\n        },\n        seatRoom() {\n            if (Number(this.name)) {\n                this.request.get(\"/sit/reserve_sit\", {\n                    params: {\n                        id: this.name\n                    }\n                }).then(res => {\n                    if (res.code === '200') {\n                        this.handleEdit(res.data)\n                        setTimeout(() => {\n                            for (let i = 0; i < this.classData.length; i++) {\n                                console.log(this.classData[i].id)\n                                console.log(this.name)\n                                if (this.classData[i].id === Number(this.name)) {\n                                    console.log(this.classData[i].id)\n                                    if (this.classData[i].available === true) {\n                                        this.sitId = this.name\n                                        this.currentIndex = i\n                                    } else {\n                                        this.sitId = \"---\"\n                                        this.currentIndex = -1\n                                        this.$message.error(\"当前位置已被选，请选择其他座位或其他时间段\")\n                                    }\n                                }\n                            }\n                        }, 1000);\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                })\n            } else {\n                this.$message.error(\"座位号输入有误\")\n            }\n\n        },\n        reset() {\n            this.name = \"\"\n            this.load()\n        },\n        handleEdit(row) {\n            if (!row.available) {\n                this.$message.error(\"该教室不可用，请选择其他教室\")\n            } else {\n                this.classroom = row.name\n                this.dialogFormVisible = true\n                this.getTime()\n                this.roomId = row.id\n                this.loadSeat()\n            }\n\n        },\n        getTime() {\n            const dateToday = new Date()\n            this.selectDate = dateToday.getFullYear() + \"-\" + (dateToday.getMonth() + 1) + \"-\" + dateToday.getDate()\n            this.selectStart = dateToday.getHours() + 1 + \":00\"\n            this.selectEnd = dateToday.getHours() + 2 + \":00\"\n            this.optionStart = this.selectStart\n            this.optionEnd = this.selectEnd\n        },\n        loadSeat() {\n            if (this.selectDate !== null && this.selectStart !== null && this.selectEnd !== null) {\n                if (this.selectDate.split(\"-\")[2] !== new Date().getDate()) {\n                    this.optionStart = \"07:00\"\n                    this.optionEnd = \"08:00\"\n                }\n                const startHour = parseInt(this.selectStart.split(\":\")[0])\n                const EndHour = parseInt(this.selectEnd.split(\":\")[0])\n                if (startHour < EndHour) {\n                    this.request.get(\"/room/check_sits\", {\n                        params: {\n                            id: this.roomId,\n                            day: this.selectDate,\n                            start: this.selectStart,\n                            end: this.selectEnd,\n                        }\n                    }).then(res => {\n                        this.classData = res.data\n                        if (this.currentIndex !== -1 && this.classData[this.currentIndex].available === false) {\n                            this.sitId = \"---\"\n                            this.currentIndex = -1\n                        }\n                    })\n                }\n\n\n\n            }\n\n        },\n        handleSizeChange(pageSize) {\n            this.pageSize = pageSize\n            this.load()\n        },\n        handleCurrentChange(pageNum) {\n            this.pageNum = pageNum\n            this.load()\n        },\n        save() {\n            if (this.selectDate !== null && this.selectStart !== null && this.selectEnd !== null) {\n                const startHour = parseInt(this.selectStart.split(\":\")[0])\n                const EndHour = parseInt(this.selectEnd.split(\":\")[0])\n                if (this.sitId !== \"---\") {\n                    if (startHour > EndHour) {\n                        this.$message.error(\"时间选择有误\")\n                    } else if (EndHour - startHour > 4) {\n                        this.$message.error(\"超出4小时时间范围\")\n                    } else {\n                        this.request.post(\"/reserve/create_reserve\", {\n                            username: JSON.parse(localStorage.getItem(\"user\")).username,\n                            roomId: this.roomId,\n                            sitId: this.sitId,\n                            startTime: this.selectDate + \" \" + this.selectStart,\n                            endTime: this.selectDate + \" \" + this.selectEnd\n                        }).then(res => {\n                            if (res.code === '200') {\n                                this.$message.success(\"预约成功\")\n                            } else {\n                                this.$message.error(\"预约失败，请重新选座\")\n                            }\n                            this.loadSeat()\n                        })\n                    }\n                } else {\n                    this.$message.error(\"您还未选择座位\")\n                }\n            } else {\n                this.$message.error(\"您的预约信息未填写完整\")\n            }\n\n        },\n        selectClass(index) {\n            if (this.classData[index].available === true) {\n                this.currentIndex = index\n                this.sitId = this.classData[index].id\n            } else {\n                this.$message.error(\"该座位已被占\")\n            }\n\n        },\n\n    }\n}\n</script>\n\n<style>\n.status-dot {\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background-color: #2c2c2c;\n    margin-right: 5px;\n    vertical-align: middle;\n    /* 将垂直对齐方式设置为 middle */\n}\n\n.select-class {\n    border-radius: 13px;\n    color: white;\n    height: 50px;\n    background-image: url(../assets/seatselecting.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 19%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n}\n\n.class-item {\n    border-radius: 13px;\n    color: white;\n    height: 50px;\n    background-image: url(../assets/seatfreewithoutplug.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 19%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.class-item2 {\n    background-image: url(../assets/seatfreewithplug.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center\n}\n\n.prompt-text {\n    margin: 0 10px;\n    padding: 8px;\n    background: rgb(179, 216, 255);\n    color: rgb(83, 168, 255);\n    border-radius: 15px\n}\n\n.seat-locked {\n    background-image: url(../assets/seatlocked.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 100%;\n    height: 100%;\n    border-radius: 15px;\n    display: flex;\n    justify-content: center;\n    align-items: center\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewReserve.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewReserve.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewReserve.vue?vue&type=template&id=353ef994&\"\nimport script from \"./NewReserve.vue?vue&type=script&lang=js&\"\nexport * from \"./NewReserve.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewReserve.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}