{"remainingRequest":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\Fudan course\\software_management\\iBooking\\client\\src\\utils\\gaode.js","dependencies":[{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\src\\utils\\gaode.js","mtime":1715762069694},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\babel.config.js","mtime":1684482910000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684483038000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1684483040000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwovLyB1dGlscy9nYW9kZS5qcwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNYXBMb2FkZXIoKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGxldCBhTWFwU2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICBhTWFwU2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2h0dHBzOi8vd2ViYXBpLmFtYXAuY29tL21hcHM/dj0xLjQuMTEma2V5PTRjMDVjMThhY2NmNmNjOTBmMTM2Zjg1MGFjNjk2YzY2JnBsdWdpbj1BTWFwLkNpdHlTZWFyY2gsQU1hcC5HZW9sb2NhdGlvbixBTWFwLkdlb21ldHJ5VXRpbCcpOwogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhTWFwU2NyaXB0KTsKCiAgICBhTWFwU2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgQU1hcC5wbHVnaW4oWydBTWFwLkdlb2xvY2F0aW9uJywgJ0FNYXAuR2VvbWV0cnlVdGlsJ10sIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZ2VvbG9jYXRpb24gPSBuZXcgQU1hcC5HZW9sb2NhdGlvbih7CiAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsCiAgICAgICAgICB0aW1lb3V0OiAxMDAwMCwKICAgICAgICAgIGJ1dHRvbk9mZnNldDogbmV3IEFNYXAuUGl4ZWwoMTAsIDIwKSwKICAgICAgICAgIHpvb21Ub0FjY3VyYWN5OiB0cnVlLAogICAgICAgICAgYnV0dG9uUG9zaXRpb246ICdSQicKICAgICAgICB9KTsKICAgICAgICBnZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKTsKICAgICAgICBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKGdlb2xvY2F0aW9uLCAnY29tcGxldGUnLCBvbkNvbXBsZXRlKTsKICAgICAgICBBTWFwLmV2ZW50LmFkZExpc3RlbmVyKGdlb2xvY2F0aW9uLCAnZXJyb3InLCBvbkVycm9yKTsKCiAgICAgICAgZnVuY3Rpb24gb25Db21wbGV0ZShkYXRhKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5a6a5L2N5oiQ5YqfJywgZGF0YS5wb3NpdGlvbik7IC8vIEHmlZnkvY3nva4KCiAgICAgICAgICBjb25zdCB0YXJnZXRQb3NpdGlvbiA9IG5ldyBBTWFwLkxuZ0xhdCgxMjEuNTAzODA3LCAzMS4zMzYwMzcpOwogICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gbmV3IEFNYXAuTG5nTGF0KGRhdGEucG9zaXRpb24ubG5nLCBkYXRhLnBvc2l0aW9uLmxhdCk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IEFNYXAuR2VvbWV0cnlVdGlsLmRpc3RhbmNlKGN1cnJlbnRQb3NpdGlvbiwgdGFyZ2V0UG9zaXRpb24pOwogICAgICAgICAgY29uc29sZS5sb2coJ+WumuS9jeaIkOWKnycsIGRhdGEucG9zaXRpb24sICfot53nprvnm67moIfngrknLCBkaXN0YW5jZSwgJ+exsycpOwogICAgICAgICAgcmVzb2x2ZShkaXN0YW5jZSA8PSA1MDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gb25FcnJvcihkYXRhKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn5a6a5L2N5aSx6LSlJywgZGF0YSk7CiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCflrprkvY3lh7rplJnvvIzor7fnoa7orqTlt7LlvIDlkK/lrprkvY3mnYPpmZAnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgYU1hcFNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICByZWplY3QobmV3IEVycm9yKCflnLDlm77ohJrmnKzliqDovb3lpLHotKUnKSk7CiAgICB9OwogIH0pOwp9"},{"version":3,"names":["MapLoader","Promise","resolve","reject","aMapScript","document","createElement","setAttribute","head","appendChild","onload","AMap","plugin","geolocation","Geolocation","enableHighAccuracy","timeout","buttonOffset","Pixel","zoomToAccuracy","buttonPosition","getCurrentPosition","event","addListener","onComplete","onError","data","console","log","position","targetPosition","LngLat","currentPosition","lng","lat","distance","GeometryUtil","Error","onerror"],"sources":["F:/Fudan course/software_management/iBooking/client/src/utils/gaode.js"],"sourcesContent":["// utils/gaode.js\r\nexport default function MapLoader() {\r\n    return new Promise((resolve, reject) => {\r\n        let aMapScript = document.createElement('script');\r\n        aMapScript.setAttribute('src', 'https://webapi.amap.com/maps?v=1.4.11&key=4c05c18accf6cc90f136f850ac696c66&plugin=AMap.CitySearch,AMap.Geolocation,AMap.GeometryUtil');\r\n        document.head.appendChild(aMapScript);\r\n        aMapScript.onload = function() {\r\n            AMap.plugin(['AMap.Geolocation', 'AMap.GeometryUtil'], function() {\r\n                var geolocation = new AMap.Geolocation({\r\n                    enableHighAccuracy: true,\r\n                    timeout: 10000,\r\n                    buttonOffset: new AMap.Pixel(10, 20),\r\n                    zoomToAccuracy: true,\r\n                    buttonPosition: 'RB'\r\n                });\r\n\r\n                geolocation.getCurrentPosition();\r\n                AMap.event.addListener(geolocation, 'complete', onComplete);\r\n                AMap.event.addListener(geolocation, 'error', onError);\r\n\r\n                function onComplete(data) {\r\n                    console.log('定位成功', data.position)\r\n                    // A教位置\r\n                    const targetPosition = new AMap.LngLat(121.503807, 31.336037);\r\n                    const currentPosition = new AMap.LngLat(data.position.lng, data.position.lat);\r\n                    const distance = AMap.GeometryUtil.distance(currentPosition, targetPosition);\r\n                    console.log('定位成功', data.position, '距离目标点', distance, '米')\r\n                    resolve(distance <= 500); \r\n                }\r\n\r\n                function onError(data) {\r\n                    console.log('定位失败', data)\r\n                    reject(new Error('定位出错，请确认已开启定位权限'));\r\n                }\r\n            });\r\n        };\r\n        aMapScript.onerror = function() {\r\n            reject(new Error('地图脚本加载失败'));\r\n        };\r\n    });\r\n}\r\n"],"mappings":";AAAA;AACA,eAAe,SAASA,SAAT,GAAqB;EAChC,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACpC,IAAIC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAjB;IACAF,UAAU,CAACG,YAAX,CAAwB,KAAxB,EAA+B,sIAA/B;IACAF,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,UAA1B;;IACAA,UAAU,CAACM,MAAX,GAAoB,YAAW;MAC3BC,IAAI,CAACC,MAAL,CAAY,CAAC,kBAAD,EAAqB,mBAArB,CAAZ,EAAuD,YAAW;QAC9D,IAAIC,WAAW,GAAG,IAAIF,IAAI,CAACG,WAAT,CAAqB;UACnCC,kBAAkB,EAAE,IADe;UAEnCC,OAAO,EAAE,KAF0B;UAGnCC,YAAY,EAAE,IAAIN,IAAI,CAACO,KAAT,CAAe,EAAf,EAAmB,EAAnB,CAHqB;UAInCC,cAAc,EAAE,IAJmB;UAKnCC,cAAc,EAAE;QALmB,CAArB,CAAlB;QAQAP,WAAW,CAACQ,kBAAZ;QACAV,IAAI,CAACW,KAAL,CAAWC,WAAX,CAAuBV,WAAvB,EAAoC,UAApC,EAAgDW,UAAhD;QACAb,IAAI,CAACW,KAAL,CAAWC,WAAX,CAAuBV,WAAvB,EAAoC,OAApC,EAA6CY,OAA7C;;QAEA,SAASD,UAAT,CAAoBE,IAApB,EAA0B;UACtBC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAAI,CAACG,QAAzB,EADsB,CAEtB;;UACA,MAAMC,cAAc,GAAG,IAAInB,IAAI,CAACoB,MAAT,CAAgB,UAAhB,EAA4B,SAA5B,CAAvB;UACA,MAAMC,eAAe,GAAG,IAAIrB,IAAI,CAACoB,MAAT,CAAgBL,IAAI,CAACG,QAAL,CAAcI,GAA9B,EAAmCP,IAAI,CAACG,QAAL,CAAcK,GAAjD,CAAxB;UACA,MAAMC,QAAQ,GAAGxB,IAAI,CAACyB,YAAL,CAAkBD,QAAlB,CAA2BH,eAA3B,EAA4CF,cAA5C,CAAjB;UACAH,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAAI,CAACG,QAAzB,EAAmC,OAAnC,EAA4CM,QAA5C,EAAsD,GAAtD;UACAjC,OAAO,CAACiC,QAAQ,IAAI,GAAb,CAAP;QACH;;QAED,SAASV,OAAT,CAAiBC,IAAjB,EAAuB;UACnBC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAApB;UACAvB,MAAM,CAAC,IAAIkC,KAAJ,CAAU,iBAAV,CAAD,CAAN;QACH;MACJ,CA3BD;IA4BH,CA7BD;;IA8BAjC,UAAU,CAACkC,OAAX,GAAqB,YAAW;MAC5BnC,MAAM,CAAC,IAAIkC,KAAJ,CAAU,UAAV,CAAD,CAAN;IACH,CAFD;EAGH,CArCM,CAAP;AAsCH"}]}