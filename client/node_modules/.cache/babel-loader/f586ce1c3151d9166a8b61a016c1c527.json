{"remainingRequest":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\thread-loader\\dist\\cjs.js!F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\babel-loader\\lib\\index.js!F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Fudan course\\software_management\\iBooking\\client\\src\\views\\NewReserve.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\src\\views\\NewReserve.vue","mtime":1717053945811},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\babel.config.js","mtime":1684482910000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684483038000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1684483038000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1684483040000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1684483038000},{"path":"F:\\Fudan course\\software_management\\iBooking\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1684483040000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJOZXdSZXNlcnZlIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6ICIiLAogICAgICBzZWFyY2hTd2l0Y2g6ICfmlZnlrqQnLAogICAgICBzZWFyY2hPcHRpb25zOiBbewogICAgICAgIHZhbHVlOiAn5pWZ5a6kJywKICAgICAgICBsYWJlbDogJ+aVmeWupCcKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAn5bqn5L2NJywKICAgICAgICBsYWJlbDogJ+W6p+S9jScKICAgICAgfV0sCiAgICAgIHBhZ2VOdW06IDEsCiAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgdG90YWw6IDEwLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGNsYXNzcm9vbTogJycsCiAgICAgIGNsYXNzRGF0YToge30sCiAgICAgIGlkTGlzdDogW10sCiAgICAgIC8v5pyq6KKr5Y2g55So55qE5bqn5L2N5Y+3CiAgICAgIGN1cnJlbnRJbmRleDogLTEsCiAgICAgIHNpdElkOiAnLS0tJywKICAgICAgc2VsZWN0RGF0ZTogJycsCiAgICAgIHNlbGVjdFN0YXJ0OiAnJywKICAgICAgc2VsZWN0RW5kOiAnJywKICAgICAgcm9vbUlkOiAtMSwKICAgICAgb3B0aW9uU3RhcnQ6ICcnLAogICAgICBvcHRpb25FbmQ6ICcnLAogICAgICBwaWNrZXJPcHRpb25zOiB7CiAgICAgICAgZGlzYWJsZWREYXRlKHRpbWUpIHsKICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTsgLy8g6I635Y+W5LuK5aSp55qE5pel5pyfCgogICAgICAgICAgY29uc3QgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKHRpbWUuZ2V0RnVsbFllYXIoKSwgdGltZS5nZXRNb250aCgpLCB0aW1lLmdldERhdGUoKSk7IC8vIOiOt+WPluebruagh+aXpeacnwoKICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSAodGFyZ2V0RGF0ZSAtIHRvZGF5KSAvICgyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8g6K6h566X55uu5qCH5pel5pyf5LiO5LuK5aSp55qE5aSp5pWw5beuCiAgICAgICAgICAvLyDlj6rlhYHorrjpgInmi6nku4rlpKnlkozku4rlpKnkuYvlkI7kuInlpKnnmoTml6XmnJ8KCiAgICAgICAgICByZXR1cm4gZGlmZmVyZW5jZSA8IC0xIHx8IGRpZmZlcmVuY2UgPiAzOwogICAgICAgIH0KCiAgICAgIH0KICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZCgpOwogICAgdGhpcy5jbGFzc0RhdGEgPSBbXTsgLy8gY29uc29sZS5sb2codGhpcy4kcm91dGUucGFyYW1zLmlkKTsKCiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkICE9PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5uYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB0aGlzLnNlYXJjaFN3aXRjaCA9ICfluqfkvY0nOwogICAgICB0aGlzLnNlYXRSb29tKCk7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgc2VhcmNoKCkgewogICAgICBpZiAodGhpcy5zZWFyY2hTd2l0Y2ggPT09ICfmlZnlrqQnKSB7CiAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWF0Um9vbSgpOwogICAgICB9CiAgICB9LAoKICAgIC8v5oqi5bqn5Yqf6IO977yM6ZqP5py65YiG6YWN5LiA5Liq5pyq6KKr5Y2g55So55qE5bqn5L2N5Y+377yM6LCD55Soc2VhdFJvb20KICAgIHJ1c2goKSB7CiAgICAgIC8v5LuO5pWw5o2u5bqT5Lit6I635Y+W5omA5pyJ5pyq6KKr5Y2g55So55qE5bqn5L2N5Y+377yM6ZqP5py65YiG6YWN5LiA5LiqCiAgICAgIHRoaXMucmVxdWVzdC5nZXQoIi9zaXQvYWxsX3NpdHMiKS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy/ojrflj5bmiYDmnInmnKrooqvljaDnlKjnmoTluqfkvY3lj7cKICAgICAgICB0aGlzLmlkTGlzdCA9IHJlcy5kYXRhLmZpbHRlcihpdGVtID0+IGl0ZW0uYXZhaWxhYmxlID09PSB0cnVlKTsKCiAgICAgICAgaWYgKHRoaXMuaWRMaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5b2T5YmN5rKh5pyJ5Y+v55So5bqn5L2NIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMuaWRMaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuaWRMaXN0Lmxlbmd0aCldLmlkOwogICAgICAgICAgdGhpcy5zZWFyY2hTd2l0Y2ggPSAn5bqn5L2NJzsKICAgICAgICAgIHRoaXMuc2VhdFJvb20oKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBsb2FkKCkgewogICAgICB0aGlzLnJlcXVlc3QuZ2V0KCIvcm9vbS9jaGVja19yb29tIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtLAogICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCgogICAgc2VhdFJvb20oKSB7CiAgICAgIGlmIChOdW1iZXIodGhpcy5uYW1lKSkgewogICAgICAgIHRoaXMucmVxdWVzdC5nZXQoIi9zaXQvcmVzZXJ2ZV9zaXQiLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgaWQ6IHRoaXMubmFtZQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgICAgICAgdGhpcy5oYW5kbGVFZGl0KHJlcy5kYXRhKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNsYXNzRGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jbGFzc0RhdGFbaV0uaWQpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lKTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFzc0RhdGFbaV0uaWQgPT09IE51bWJlcih0aGlzLm5hbWUpKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2xhc3NEYXRhW2ldLmlkKTsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsYXNzRGF0YVtpXS5hdmFpbGFibGUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpdElkID0gdGhpcy5uYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNpdElkID0gIi0tLSI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAtMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlvZPliY3kvY3nva7lt7LooqvpgInvvIzor7fpgInmi6nlhbbku5bluqfkvY3miJblhbbku5bml7bpl7TmrrUiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuW6p+S9jeWPt+i+k+WFpeacieivryIpOwogICAgICB9CiAgICB9LAoKICAgIHJlc2V0KCkgewogICAgICB0aGlzLm5hbWUgPSAiIjsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAoKICAgIGhhbmRsZUVkaXQocm93KSB7CiAgICAgIGlmICghcm93LmF2YWlsYWJsZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivpeaVmeWupOS4jeWPr+eUqO+8jOivt+mAieaLqeWFtuS7luaVmeWupCIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2xhc3Nyb29tID0gcm93Lm5hbWU7CiAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGhpcy5nZXRUaW1lKCk7CiAgICAgICAgdGhpcy5yb29tSWQgPSByb3cuaWQ7CiAgICAgICAgdGhpcy5sb2FkU2VhdCgpOwogICAgICB9CiAgICB9LAoKICAgIGdldFRpbWUoKSB7CiAgICAgIGNvbnN0IGRhdGVUb2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIHRoaXMuc2VsZWN0RGF0ZSA9IGRhdGVUb2RheS5nZXRGdWxsWWVhcigpICsgIi0iICsgKGRhdGVUb2RheS5nZXRNb250aCgpICsgMSkgKyAiLSIgKyBkYXRlVG9kYXkuZ2V0RGF0ZSgpOwogICAgICB0aGlzLnNlbGVjdFN0YXJ0ID0gZGF0ZVRvZGF5LmdldEhvdXJzKCkgKyAxICsgIjowMCI7CiAgICAgIHRoaXMuc2VsZWN0RW5kID0gZGF0ZVRvZGF5LmdldEhvdXJzKCkgKyAyICsgIjowMCI7CiAgICAgIHRoaXMub3B0aW9uU3RhcnQgPSB0aGlzLnNlbGVjdFN0YXJ0OwogICAgICB0aGlzLm9wdGlvbkVuZCA9IHRoaXMuc2VsZWN0RW5kOwogICAgfSwKCiAgICBsb2FkU2VhdCgpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0RGF0ZSAhPT0gbnVsbCAmJiB0aGlzLnNlbGVjdFN0YXJ0ICE9PSBudWxsICYmIHRoaXMuc2VsZWN0RW5kICE9PSBudWxsKSB7CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0RGF0ZS5zcGxpdCgiLSIpWzJdICE9PSBuZXcgRGF0ZSgpLmdldERhdGUoKSkgewogICAgICAgICAgdGhpcy5vcHRpb25TdGFydCA9ICIwNzowMCI7CiAgICAgICAgICB0aGlzLm9wdGlvbkVuZCA9ICIwODowMCI7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBzdGFydEhvdXIgPSBwYXJzZUludCh0aGlzLnNlbGVjdFN0YXJ0LnNwbGl0KCI6IilbMF0pOwogICAgICAgIGNvbnN0IEVuZEhvdXIgPSBwYXJzZUludCh0aGlzLnNlbGVjdEVuZC5zcGxpdCgiOiIpWzBdKTsKCiAgICAgICAgaWYgKHN0YXJ0SG91ciA8IEVuZEhvdXIpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdC5nZXQoIi9yb29tL2NoZWNrX3NpdHMiLCB7CiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIGlkOiB0aGlzLnJvb21JZCwKICAgICAgICAgICAgICBkYXk6IHRoaXMuc2VsZWN0RGF0ZSwKICAgICAgICAgICAgICBzdGFydDogdGhpcy5zZWxlY3RTdGFydCwKICAgICAgICAgICAgICBlbmQ6IHRoaXMuc2VsZWN0RW5kCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy5jbGFzc0RhdGEgPSByZXMuZGF0YTsKCiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCAhPT0gLTEgJiYgdGhpcy5jbGFzc0RhdGFbdGhpcy5jdXJyZW50SW5kZXhdLmF2YWlsYWJsZSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICB0aGlzLnNpdElkID0gIi0tLSI7CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHBhZ2VTaXplOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCgogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKCiAgICBzYXZlKCkgewogICAgICBpZiAodGhpcy5zZWxlY3REYXRlICE9PSBudWxsICYmIHRoaXMuc2VsZWN0U3RhcnQgIT09IG51bGwgJiYgdGhpcy5zZWxlY3RFbmQgIT09IG51bGwpIHsKICAgICAgICBjb25zdCBzdGFydEhvdXIgPSBwYXJzZUludCh0aGlzLnNlbGVjdFN0YXJ0LnNwbGl0KCI6IilbMF0pOwogICAgICAgIGNvbnN0IEVuZEhvdXIgPSBwYXJzZUludCh0aGlzLnNlbGVjdEVuZC5zcGxpdCgiOiIpWzBdKTsKCiAgICAgICAgaWYgKHRoaXMuc2l0SWQgIT09ICItLS0iKSB7CiAgICAgICAgICBpZiAoc3RhcnRIb3VyID4gRW5kSG91cikgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLml7bpl7TpgInmi6nmnInor68iKTsKICAgICAgICAgIH0gZWxzZSBpZiAoRW5kSG91ciAtIHN0YXJ0SG91ciA+IDQpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6LaF5Ye6NOWwj+aXtuaXtumXtOiMg+WbtCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LnBvc3QoIi9yZXNlcnZlL2NyZWF0ZV9yZXNlcnZlIiwgewogICAgICAgICAgICAgIHVzZXJuYW1lOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpLnVzZXJuYW1lLAogICAgICAgICAgICAgIHJvb21JZDogdGhpcy5yb29tSWQsCiAgICAgICAgICAgICAgc2l0SWQ6IHRoaXMuc2l0SWQsCiAgICAgICAgICAgICAgc3RhcnRUaW1lOiB0aGlzLnNlbGVjdERhdGUgKyAiICIgKyB0aGlzLnNlbGVjdFN0YXJ0LAogICAgICAgICAgICAgIGVuZFRpbWU6IHRoaXMuc2VsZWN0RGF0ZSArICIgIiArIHRoaXMuc2VsZWN0RW5kCiAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumihOe6puaIkOWKnyIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLpooTnuqblpLHotKXvvIzor7fph43mlrDpgInluqciKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMubG9hZFNlYXQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaCqOi/mOacqumAieaLqeW6p+S9jSIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmgqjnmoTpooTnuqbkv6Hmga/mnKrloavlhpnlrozmlbQiKTsKICAgICAgfQogICAgfSwKCiAgICBzZWxlY3RDbGFzcyhpbmRleCkgewogICAgICBpZiAodGhpcy5jbGFzc0RhdGFbaW5kZXhdLmF2YWlsYWJsZSA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgICAgdGhpcy5zaXRJZCA9IHRoaXMuY2xhc3NEYXRhW2luZGV4XS5pZDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor6XluqfkvY3lt7LooqvljaAiKTsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;EACAA,kBADA;;EAEAC;IACA;MACAD,QADA;MAEAE,kBAFA;MAGAC,gBACA;QACAC,WADA;QAEAC;MAFA,CADA,EAKA;QACAD,WADA;QAEAC;MAFA,CALA,CAHA;MAaAC,UAbA;MAcAC,YAdA;MAeAC,SAfA;MAgBAC,aAhBA;MAiBAC,wBAjBA;MAkBAC,aAlBA;MAmBAC,aAnBA;MAoBAC,UApBA;MAoBA;MACAC,gBArBA;MAsBAC,YAtBA;MAuBAC,cAvBA;MAwBAC,eAxBA;MAyBAC,aAzBA;MA0BAC,UA1BA;MA2BAC,eA3BA;MA4BAC,aA5BA;MA6BAC;QACAC;UACA,yBADA,CACA;;UACA,iFAFA,CAEA;;UACA,gEAHA,CAGA;UAEA;;UACA;QACA;;MARA;IA7BA;EAyCA,CA5CA;;EA6CAC;IACA;IACA,oBAFA,CAGA;;IACA;MACA;MACA;MACA;IACA;EACA,CAtDA;;EAuDAC;IACAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAPA;;IAQA;IACAC;MACA;MACA;QACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;UACA;UACA;QACA;MACA,CAVA;IAWA,CAtBA;;IAuBAC;MACA;QACAC;UACAvB,qBADA;UAEAC,uBAFA;UAGAP;QAHA;MADA,GAMA8B,IANA,CAMAC;QACA;QACA;MACA,CATA;IAWA,CAnCA;;IAoCAC;MACA;QACA;UACAH;YACAI;UADA;QADA,GAIAH,IAJA,CAIAC;UACA;YACA;YACAG;cACA;gBACAC;gBACAA;;gBACA;kBACAA;;kBACA;oBACA;oBACA;kBACA,CAHA,MAGA;oBACA;oBACA;oBACA;kBACA;gBACA;cACA;YACA,CAhBA,EAgBA,IAhBA;UAiBA,CAnBA,MAmBA;YACA;UACA;QACA,CA3BA;MA4BA,CA7BA,MA6BA;QACA;MACA;IAEA,CAtEA;;IAuEAC;MACA;MACA;IACA,CA1EA;;IA2EAC;MACA;QACA;MACA,CAFA,MAEA;QACA;QACA;QACA;QACA;QACA;MACA;IAEA,CAtFA;;IAuFAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CA9FA;;IA+FAC;MACA;QACA;UACA;UACA;QACA;;QACA;QACA;;QACA;UACA;YACAV;cACAI,eADA;cAEAO,oBAFA;cAGAC,uBAHA;cAIAC;YAJA;UADA,GAOAZ,IAPA,CAOAC;YACA;;YACA;cACA;cACA;YACA;UACA,CAbA;QAcA;MAIA;IAEA,CA5HA;;IA6HAY;MACA;MACA;IACA,CAhIA;;IAiIAC;MACA;MACA;IACA,CApIA;;IAqIAC;MACA;QACA;QACA;;QACA;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA,CAFA,MAEA;YACA;cACAC,2DADA;cAEA3B,mBAFA;cAGAJ,iBAHA;cAIAgC,mDAJA;cAKAC;YALA,GAMAlB,IANA,CAMAC;cACA;gBACA;cACA,CAFA,MAEA;gBACA;cACA;;cACA;YACA,CAbA;UAcA;QACA,CArBA,MAqBA;UACA;QACA;MACA,CA3BA,MA2BA;QACA;MACA;IAEA,CArKA;;IAsKAkB;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;MACA;IAEA;;EA9KA;AAvDA","names":["name","data","searchSwitch","searchOptions","value","label","pageNum","pageSize","total","tableData","dialogFormVisible","classroom","classData","idList","currentIndex","sitId","selectDate","selectStart","selectEnd","roomId","optionStart","optionEnd","pickerOptions","disabledDate","created","methods","search","rush","load","params","then","res","seatRoom","id","setTimeout","console","reset","handleEdit","getTime","loadSeat","day","start","end","handleSizeChange","handleCurrentChange","save","username","startTime","endTime","selectClass"],"sourceRoot":"src/views","sources":["NewReserve.vue"],"sourcesContent":["<template>\n    <div>\n        <div style=\"padding: 10px 0;\">\n            <el-input style=\"width: 200px\" suffix-icon=\"el-icon-search\" :placeholder=\"'搜索' + searchSwitch\"\n                v-model=\"name\"></el-input>\n            <el-select style=\"width: 80px; margin-left: 5px;\" v-model=\"searchSwitch\" placeholder=\"请选择\">\n                <el-option v-for=\"item in searchOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\">\n                </el-option>\n            </el-select>\n            <el-button style=\"margin-left: 5px;\" type=\"primary\" @click=\"search\">搜索</el-button>\n            <el-button @click=\"reset\">重置</el-button>\n            <el-button style=\"margin-left: 5px;\" type=\"primary\" @click=\"rush\">抢座</el-button>\n        </div>\n        <el-table :data=\"tableData\" border stripe>\n\n            <el-table-column prop=\"id\" label=\"教室ID\">\n            </el-table-column>\n            <el-table-column prop=\"name\" label=\"教室名称\">\n            </el-table-column>\n            <el-table-column prop=\"type\" label=\"教室类型\">\n            </el-table-column>\n            <el-table-column label=\"是否可用\">\n                <template slot-scope=\"scope\">\n                    <el-switch v-model=\"scope.row.available\" active-color=\"#13ce66\" inactive-color=\"#ccc\"\n                        disabled></el-switch>\n                </template>\n            </el-table-column>\n            <el-table-column prop=\"openTime\" label=\"开放时间\">\n            </el-table-column>\n            <el-table-column prop=\"closeTime\" label=\"关闭时间\">\n            </el-table-column>\n            <el-table-column prop=\"option\" label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-button @click=\"handleEdit(scope.row)\">预约 <i class=\"el-icon-s-check\"></i></el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <div style=\"padding: 10px 0;\">\n            <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" :current-page=\"pageNum\"\n                :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"total\">\n            </el-pagination>\n        </div>\n\n        <el-dialog title=\"座位预定\" :visible.sync=\"dialogFormVisible\" width=\"70%\">\n            <el-row :gutter=\"20\" style=\"margin-bottom: 20px; height: auto;\">\n                <el-col :span=\"18\" style=\"height: 100%;\">\n                    <el-card class=\"box-card-home\" style=\"height: 100%;\">\n                        <div slot=\"header\" class=\"clearfix\" style=\"color: #409EFF; height: 10%;\">\n                            <span>教室名称：{{ classroom }}</span>\n                        </div>\n                        <div style=\"height: 90%;\">\n\n                            <!-- 选座位 -->\n                            <div style=\"display: flex; flex-wrap: wrap; cursor: pointer; flex: 80%\">\n                                <div :class=\"[index === currentIndex ? 'select-class' : 'class-item']\"\n                                    @click=\"selectClass(index)\" style=\"  margin-bottom: 20px;\"\n                                    v-for=\"(item, index) in classData\" :key=\"index\">\n                                    <div v-if=\"!item.available\" class=\"seat-locked\">\n                                        {{ classData[index].id }}\n                                    </div>\n                                    <div v-else-if=\"item.chargeport\"\n                                        :class=\"[index === currentIndex ? 'select-class' : 'class-item2']\">\n                                        {{ classData[index].id }}\n                                    </div>\n                                    <div v-else>\n                                        {{ classData[index].id }}\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n\n                    </el-card>\n                </el-col>\n\n                <el-col :span=\"6\" style=\"height: 100%;\">\n                    <el-form label-width=\"30%\">\n                        <el-form-item label=\"日期选择\">\n                            <el-date-picker v-model=\"selectDate\" type=\"date\" style=\"width: 80%;\"\n                                :picker-options=\"pickerOptions\" value-format=\"yyyy-MM-dd\" @change=\"loadSeat()\">\n                            </el-date-picker>\n                        </el-form-item>\n\n                        <el-form-item label=\"开始时间\">\n                            <el-time-select v-model=\"selectStart\" :picker-options=\"{\n                                start: optionStart,\n                                step: '01:00',\n                                end: '21:00'\n                            }\" style=\"width: 80%;\" @change=\"loadSeat()\">\n                            </el-time-select>\n                        </el-form-item>\n\n                        <el-form-item label=\"结束时间\">\n                            <el-time-select v-model=\"selectEnd\" :picker-options=\"{\n                                start: optionEnd,\n                                step: '01:00',\n                                end: '22:00'\n                            }\" style=\"width: 80%;\" @change=\"loadSeat()\">\n                            </el-time-select>\n                        </el-form-item>\n\n                        <el-form-item label=\"座位选择\">\n                            <div style=\"color: rgb(0, 0, 0)\">\n                                {{ sitId }} 号\n                            </div>\n                        </el-form-item>\n                    </el-form>\n                    <div style=\"padding: 15px; \">\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\"></span>空闲-有插座\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #8a8a8a;\"></span>空闲-无插座\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #d81e06;\"></span>已被占\n                        </div>\n                        <div style=\"margin-top: 10px\">\n                            <span class=\"status-dot\" style=\"background-color: #43d828;\"></span>选中\n                        </div>\n                    </div>\n                </el-col>\n\n            </el-row>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"NewReserve\",\n    data() {\n        return {\n            name: \"\",\n            searchSwitch: '教室',\n            searchOptions: [\n                {\n                    value: '教室',\n                    label: '教室'\n                },\n                {\n                    value: '座位',\n                    label: '座位'\n                }\n            ],\n            pageNum: 1,\n            pageSize: 20,\n            total: 10,\n            tableData: [],\n            dialogFormVisible: false,\n            classroom: '',\n            classData: {},\n            idList: [],//未被占用的座位号\n            currentIndex: -1,\n            sitId: '---',\n            selectDate: '',\n            selectStart: '',\n            selectEnd: '',\n            roomId: -1,\n            optionStart: '',\n            optionEnd: '',\n            pickerOptions: {\n                disabledDate(time) {\n                    const today = new Date(); // 获取今天的日期\n                    const targetDate = new Date(time.getFullYear(), time.getMonth(), time.getDate()); // 获取目标日期\n                    const difference = (targetDate - today) / (24 * 60 * 60 * 1000); // 计算目标日期与今天的天数差\n\n                    // 只允许选择今天和今天之后三天的日期\n                    return difference < -1 || difference > 3;\n                }\n            },\n\n        }\n    },\n    created() {\n        this.load()\n        this.classData = []\n        // console.log(this.$route.params.id);\n        if (this.$route.params.id !== undefined) {\n            this.name = this.$route.params.id\n            this.searchSwitch = '座位'\n            this.seatRoom()\n        }\n    },\n    methods: {\n        search() {\n            if (this.searchSwitch === '教室') {\n                this.load()\n            } else {\n                this.seatRoom()\n            }\n        },\n        //抢座功能，随机分配一个未被占用的座位号，调用seatRoom\n        rush() {\n          //从数据库中获取所有未被占用的座位号，随机分配一个\n            this.request.get(\"/sit/all_sits\").then(res => {\n                //获取所有未被占用的座位号\n                this.idList = res.data.filter(item => item.available === true)\n                if (this.idList.length === 0) {\n                    this.$message.error(\"当前没有可用座位\")\n                } else {\n                    this.name = this.idList[Math.floor(Math.random() * this.idList.length)].id\n                    this.searchSwitch = '座位'\n                    this.seatRoom()\n                }\n            })\n        },\n        load() {\n            this.request.get(\"/room/check_room\", {\n                params: {\n                    pageNum: this.pageNum,\n                    pageSize: this.pageSize,\n                    name: this.name\n                }\n            }).then(res => {\n                this.tableData = res.data.records\n                this.total = res.data.total\n            })\n\n        },\n        seatRoom() {\n            if (Number(this.name)) {\n                this.request.get(\"/sit/reserve_sit\", {\n                    params: {\n                        id: this.name\n                    }\n                }).then(res => {\n                    if (res.code === '200') {\n                        this.handleEdit(res.data)\n                        setTimeout(() => {\n                            for (let i = 0; i < this.classData.length; i++) {\n                                console.log(this.classData[i].id)\n                                console.log(this.name)\n                                if (this.classData[i].id === Number(this.name)) {\n                                    console.log(this.classData[i].id)\n                                    if (this.classData[i].available === true) {\n                                        this.sitId = this.name\n                                        this.currentIndex = i\n                                    } else {\n                                        this.sitId = \"---\"\n                                        this.currentIndex = -1\n                                        this.$message.error(\"当前位置已被选，请选择其他座位或其他时间段\")\n                                    }\n                                }\n                            }\n                        }, 1000);\n                    } else {\n                        this.$message.error(res.msg)\n                    }\n                })\n            } else {\n                this.$message.error(\"座位号输入有误\")\n            }\n\n        },\n        reset() {\n            this.name = \"\"\n            this.load()\n        },\n        handleEdit(row) {\n            if (!row.available) {\n                this.$message.error(\"该教室不可用，请选择其他教室\")\n            } else {\n                this.classroom = row.name\n                this.dialogFormVisible = true\n                this.getTime()\n                this.roomId = row.id\n                this.loadSeat()\n            }\n\n        },\n        getTime() {\n            const dateToday = new Date()\n            this.selectDate = dateToday.getFullYear() + \"-\" + (dateToday.getMonth() + 1) + \"-\" + dateToday.getDate()\n            this.selectStart = dateToday.getHours() + 1 + \":00\"\n            this.selectEnd = dateToday.getHours() + 2 + \":00\"\n            this.optionStart = this.selectStart\n            this.optionEnd = this.selectEnd\n        },\n        loadSeat() {\n            if (this.selectDate !== null && this.selectStart !== null && this.selectEnd !== null) {\n                if (this.selectDate.split(\"-\")[2] !== new Date().getDate()) {\n                    this.optionStart = \"07:00\"\n                    this.optionEnd = \"08:00\"\n                }\n                const startHour = parseInt(this.selectStart.split(\":\")[0])\n                const EndHour = parseInt(this.selectEnd.split(\":\")[0])\n                if (startHour < EndHour) {\n                    this.request.get(\"/room/check_sits\", {\n                        params: {\n                            id: this.roomId,\n                            day: this.selectDate,\n                            start: this.selectStart,\n                            end: this.selectEnd,\n                        }\n                    }).then(res => {\n                        this.classData = res.data\n                        if (this.currentIndex !== -1 && this.classData[this.currentIndex].available === false) {\n                            this.sitId = \"---\"\n                            this.currentIndex = -1\n                        }\n                    })\n                }\n\n\n\n            }\n\n        },\n        handleSizeChange(pageSize) {\n            this.pageSize = pageSize\n            this.load()\n        },\n        handleCurrentChange(pageNum) {\n            this.pageNum = pageNum\n            this.load()\n        },\n        save() {\n            if (this.selectDate !== null && this.selectStart !== null && this.selectEnd !== null) {\n                const startHour = parseInt(this.selectStart.split(\":\")[0])\n                const EndHour = parseInt(this.selectEnd.split(\":\")[0])\n                if (this.sitId !== \"---\") {\n                    if (startHour > EndHour) {\n                        this.$message.error(\"时间选择有误\")\n                    } else if (EndHour - startHour > 4) {\n                        this.$message.error(\"超出4小时时间范围\")\n                    } else {\n                        this.request.post(\"/reserve/create_reserve\", {\n                            username: JSON.parse(localStorage.getItem(\"user\")).username,\n                            roomId: this.roomId,\n                            sitId: this.sitId,\n                            startTime: this.selectDate + \" \" + this.selectStart,\n                            endTime: this.selectDate + \" \" + this.selectEnd\n                        }).then(res => {\n                            if (res.code === '200') {\n                                this.$message.success(\"预约成功\")\n                            } else {\n                                this.$message.error(\"预约失败，请重新选座\")\n                            }\n                            this.loadSeat()\n                        })\n                    }\n                } else {\n                    this.$message.error(\"您还未选择座位\")\n                }\n            } else {\n                this.$message.error(\"您的预约信息未填写完整\")\n            }\n\n        },\n        selectClass(index) {\n            if (this.classData[index].available === true) {\n                this.currentIndex = index\n                this.sitId = this.classData[index].id\n            } else {\n                this.$message.error(\"该座位已被占\")\n            }\n\n        },\n\n    }\n}\n</script>\n\n<style>\n.status-dot {\n    display: inline-block;\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background-color: #2c2c2c;\n    margin-right: 5px;\n    vertical-align: middle;\n    /* 将垂直对齐方式设置为 middle */\n}\n\n.select-class {\n    border-radius: 13px;\n    color: white;\n    height: 50px;\n    background-image: url(../assets/seatselecting.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 19%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n}\n\n.class-item {\n    border-radius: 13px;\n    color: white;\n    height: 50px;\n    background-image: url(../assets/seatfreewithoutplug.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 19%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.class-item2 {\n    background-image: url(../assets/seatfreewithplug.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center\n}\n\n.prompt-text {\n    margin: 0 10px;\n    padding: 8px;\n    background: rgb(179, 216, 255);\n    color: rgb(83, 168, 255);\n    border-radius: 15px\n}\n\n.seat-locked {\n    background-image: url(../assets/seatlocked.png);\n    background-repeat: no-repeat;\n    background-position: top;\n    width: 100%;\n    height: 100%;\n    border-radius: 15px;\n    display: flex;\n    justify-content: center;\n    align-items: center\n}\n</style>\n"]}]}